<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<title>AAR SoirÃ©e â€” Live Rules V2</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<style>
  :root { --brand:#0a7be7; --bg:#f6f7f9; --card:#fff; --muted:#666; --border:#d9dfe6; --ok:#22a06b; --warn:#c97a00; --copy:#0a7be7; }
  *{box-sizing:border-box}
  body{margin:0;font-family:Segoe UI,system-ui,-apple-system,Arial,sans-serif;background:var(--bg);color:#222}
  header{position:sticky;top:0;z-index:10;background:#fff;border-bottom:1px solid var(--border);padding:10px 20px;display:flex;align-items:center;justify-content:space-between}
  header h1{margin:0;font-size:18px}
  nav a{color:#444;text-decoration:none;margin:0 10px;padding:6px 2px;font-weight:600}
  nav a.active{color:var(--brand);border-bottom:2px solid var(--brand)}
  .container{padding:22px;max-width:1100px;margin:0 auto}
  .card{background:var(--card);border:1px solid var(--border);border-radius:10px;box-shadow:0 1px 4px rgba(0,0,0,.06)}
  #drop-zone{padding:48px 20px;text-align:center;color:#555;border:2px dashed var(--border);border-radius:10px;background:#fff;cursor:pointer}
  #drop-zone:hover{border-color:var(--brand)}
  #output{margin-top:18px}
  .day-block{position:relative;margin:16px 0;padding:14px 16px;border:1px solid var(--border);border-radius:10px;background:#fff}
  .day-header{font-weight:700;color:var(--brand);margin-bottom:6px}
  .category{margin:4px 0}
  .copy-btn{position:absolute;right:14px;top:12px;background:var(--copy);color:#fff;border:none;border-radius:6px;padding:6px 10px;cursor:pointer}
  .copy-btn:hover{filter:brightness(.95)}
  .muted{color:var(--muted);font-size:13px}
  .rules-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
  .rule-card{padding:14px;border:1px solid var(--border);border-radius:10px;background:#fff}
  .rule-card h4{margin:0 0 8px 0}
  textarea{width:100%;min-height:70px;border:1px solid var(--border);border-radius:8px;padding:8px;resize:vertical;font-family:inherit}
  select{width:100%;border:1px solid var(--border);border-radius:8px;padding:8px;background:#fff}
  table{border-collapse:collapse;width:100%;margin-top:10px}
  th,td{border:1px solid var(--border);padding:8px;text-align:left}
  th{background:var(--brand);color:#fff}
  .btn-row{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
  .btn{background:#fff;border:1px solid var(--border);border-radius:8px;padding:8px 10px;cursor:pointer}
  .btn.primary{background:var(--brand);border-color:var(--brand);color:#fff}
  .btn.good{background:var(--ok);border-color:var(--ok);color:#fff}
  .btn.warn{background:var(--warn);border-color:var(--warn);color:#fff}
  .row{display:flex;gap:16px;align-items:center;justify-content:space-between;flex-wrap:wrap}
  .right{margin-left:auto}
  .small{font-size:12px}
  .pill{display:inline-block;border:1px solid var(--border);border-radius:999px;padding:2px 8px;margin:2px 6px 2px 0;background:#f0f6ff;color:#0a4fa6;font-size:12px}
  /* Checklist + Emails petits styles */
  #checklist > div{display:flex;align-items:center;gap:8px;margin:6px 0}
  #emails input, #emails textarea{width:100%;margin:6px 0;padding:8px;border:1px solid var(--border);border-radius:8px;font-family:inherit}
</style>
</head>
<body>
  <header>
    <h1>AAR SoirÃ©e â€” Live Rules V2</h1>
    <nav>
      <a href="#" id="tab-home" class="active">ğŸ  Home</a>
      <a href="#" id="tab-rules">âš™ï¸ RÃ¨gles</a>
      <a href="#" id="tab-check">ğŸ“‹ Checklist</a>
      <a href="#" id="tab-mails">âœ‰ï¸ Emails</a>
    </nav>
  </header>

  <!-- HOME -->
  <div class="container" id="view-home">
    <div class="card" id="drop-zone">
      <p>ğŸ“‚ Glisse ton fichier <b>arrivees.xls</b> / <b>.xlsx</b> ici ou clique pour le sÃ©lectionner</p>
      <input type="file" id="file-input" accept=".xls,.xlsx" style="display:none" />
      <p class="muted">Colonnes attendues (intitulÃ©s flexibles) : <i>Nom / Adultes / Enfants / Commentaire / Date</i>.<br/>Multi-jours acceptÃ© : regroupement par date + bouton ğŸ“‹ Copier par jour.</p>
    </div>
    <div id="output"></div>
  </div>

  <!-- CHECKLIST -->
  <div class="container" id="view-check" style="display:none">
    <h2>Checklist shift du soir</h2>
    <div id="checklist"></div>
    <textarea id="memo" placeholder="MÃ©mo du soir (sauvegardÃ© automatiquement)"></textarea>
    <button id="reset-check">ğŸ§¹ RÃ©initialiser checklist</button>
  </div>

  <!-- EMAILS -->
  <div class="container" id="view-mails" style="display:none">
    <h2>ModÃ¨les dâ€™emails</h2>
    <div id="emails"></div>
    <button id="add-mail">â• Ajouter un modÃ¨le</button>
    <button id="reset-mails">ğŸ§¹ RÃ©initialiser</button>
  </div>

  <!-- RULES -->
  <div class="container" id="view-rules" style="display:none">
    <div class="row">
      <h2 style="margin:0">RÃ¨gles</h2>
      <div class="right small muted" id="rules-status">RÃ¨gles chargÃ©es</div>
    </div>

    <div class="rule-card" style="margin:14px 0">
      <h3 style="margin:0 0 8px 0">RÃ¨gles dâ€™ouverture de sofa (9 compositions)</h3>
      <table>
        <thead>
          <tr><th>Composition</th><th>Action</th></tr>
        </thead>
        <tbody id="sofa-rules-body">
          <!-- lignes injectÃ©es en JS -->
        </tbody>
      </table>
      <div class="muted small" style="margin-top:6px">Modifie les menus puis clique â€œğŸ’¾ Mettre Ã  jour les rÃ¨glesâ€.</div>
    </div>

    <div class="rules-grid">
      <div class="rule-card">
        <h4>ğŸ¼ LIT BÃ‰BÃ‰ â€” mots-clÃ©s</h4>
        <textarea id="kw-baby"></textarea>
        <div class="muted small">Exemples : <span class="pill">lit bb</span> <span class="pill">lit bÃ©bÃ©</span> <span class="pill">lit bebe</span> <span class="pill">baby</span> <span class="pill">cot</span></div>
      </div>

      <div class="rule-card">
        <h4>ğŸ”— COMMUNIQUANTE â€” mots-clÃ©s</h4>
        <textarea id="kw-comm"></textarea>
        <div class="muted small">Exemples : <span class="pill">comm</span> <span class="pill">connecte</span> <span class="pill">connectÃ©</span> <span class="pill">connected</span> <span class="pill">communic</span></div>
      </div>

      <div class="rule-card">
        <h4>â° DAY USE â€” mots-clÃ©s</h4>
        <textarea id="kw-dayuse"></textarea>
        <div class="muted small">Exemple : <span class="pill">day use</span></div>
      </div>

      <div class="rule-card">
        <h4>â° ARRIVÃ‰E PRIORITAIRE â€” mots-clÃ©s</h4>
        <textarea id="kw-early"></textarea>
        <div class="muted small">Exemples : <span class="pill">early</span> <span class="pill">prioritaire</span> <span class="pill">11h</span> <span class="pill">checkin</span></div>
      </div>
    </div>

    <div class="btn-row">
      <button class="btn good" id="btn-save">ğŸ’¾ Mettre Ã  jour les rÃ¨gles</button>
      <button class="btn" id="btn-export">ğŸ“¤ Exporter (JSON)</button>
      <label class="btn">
        ğŸ“¥ Importer (JSON)
        <input type="file" id="import-file" accept="application/json" style="display:none" />
      </label>
      <button class="btn warn" id="btn-reset">â†º RÃ©tablir valeurs par dÃ©faut</button>
    </div>

    <div class="muted small" style="margin-top:8px">
      Les mots-clÃ©s sont <b>insensibles</b> Ã  la casse et aux accents. SÃ©pare chaque entrÃ©e par une virgule.
      Toute modification est sauvegardÃ©e dans le navigateur (localStorage) et appliquÃ©e Ã  la prochaine analyse (ou relance auto si un fichier est dÃ©jÃ  chargÃ©).
    </div>
  </div>

<script>
/* ===================== NAVIGATION (corrigÃ©e) ===================== */
const tabs = {
  home: document.getElementById('tab-home'),
  rules: document.getElementById('tab-rules'),
  check: document.getElementById('tab-check'),
  mails: document.getElementById('tab-mails')
};
const views = {
  home: document.getElementById('view-home'),
  rules: document.getElementById('view-rules'),
  check: document.getElementById('view-check'),
  mails: document.getElementById('view-mails')
};

function showTab(tabName){
  Object.values(views).forEach(v=>v.style.display='none');
  Object.values(tabs).forEach(t=>t.classList.remove('active'));
  views[tabName].style.display='block';
  tabs[tabName].classList.add('active');
}
tabs.home.onclick=(e)=>{e.preventDefault();showTab('home');};
tabs.rules.onclick=(e)=>{e.preventDefault();showTab('rules');};
tabs.check.onclick=(e)=>{e.preventDefault();showTab('check');};
tabs.mails.onclick=(e)=>{e.preventDefault();showTab('mails');};
// Ã‰tat initial
showTab('home');

/* ===================== Upload ===================== */
const dropZone=document.getElementById('drop-zone');
const fileInput=document.getElementById('file-input');
dropZone.onclick=()=>fileInput.click();
dropZone.ondragover=(e)=>{e.preventDefault(); dropZone.style.borderColor='#0a7be7';};
dropZone.ondragleave=()=>{dropZone.style.borderColor='var(--border)';};
dropZone.ondrop=(e)=>{e.preventDefault(); dropZone.style.borderColor='var(--border)'; handleFile(e.dataTransfer.files[0]);};
fileInput.onchange=(e)=>handleFile(e.target.files[0]);

/* ===================== Utils ===================== */
function stripAccentsLower(s){
  return s.toString().toLowerCase()
    .normalize('NFD')
    .replace(/\p{Diacritic}/gu,'');
}
function parseList(text){
  return text.split(',').map(t=>stripAccentsLower(t).trim()).filter(Boolean);
}
function buildKeywordRegex(list){
  const esc = s => s.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
  const pattern = list.map(esc).join('|');
  return pattern ? new RegExp(`(${pattern})`,'i') : null;
}
function smartDateKey(d){
  const s=d.toString().trim();
  if(!s || s==='Non datÃ©') return {key:'9999-12-31', label:'Non datÃ©'};
  const m1=s.match(/^(\d{1,2})[\/\-\.](\d{1,2})[\/\-\.](\d{4})$/);
  if(m1){ const [_,dd,mm,yyyy]=m1; return {key:`${yyyy}-${mm.padStart(2,'0')}-${dd.padStart(2,'0')}`, label:s}; }
  const m2=s.match(/^(\d{4})[\/\-\.](\d{1,2})[\/\-\.](\d{1,2})$/);
  if(m2){ const [_,yyyy,mm,dd]=m2; return {key:`${yyyy}-${mm.padStart(2,'0')}-${dd.padStart(2,'0')}`, label:s}; }
  return {key:s, label:s};
}

/* ===================== Defaults & Storage ===================== */
const DEFAULTS={
  keywords:{
    baby:["lit bb","lit bebe","lit bÃ©bÃ©","baby","cot"],
    comm:["comm","connecte","connectÃ©","connected","communic"],
    dayuse:["day use"],
    early:["early","prioritaire","11h","checkin"]
  },
  sofa:{
    "1A+0E":"0",
    "1A+1E":"1",
    "1A+2E":"2",
    "1A+3E":"2",
    "2A+0E":"0",
    "2A+1E":"1",
    "2A+2E":"2",
    "3A+0E":"1",
    "3A+1E":"2"
  }
};
const LS_KEY='aar_soiree_rules_v2';
let RULES = loadRules();

/* ===================== RÃ¨gles UI ===================== */
const statusEl=document.getElementById('rules-status');
const txtBaby=document.getElementById('kw-baby');
const txtComm=document.getElementById('kw-comm');
const txtDay=document.getElementById('kw-dayuse');
const txtEarly=document.getElementById('kw-early');
const tbodySofa=document.getElementById('sofa-rules-body');

const SOFA_OPTIONS = [
  {val:"0", label:"Sofa fermÃ©"},
  {val:"1", label:"1 sofa"},
  {val:"2", label:"2 sofa"}
];
const SOFA_ORDER = ["1A+0E","1A+1E","1A+2E","1A+3E","2A+0E","2A+1E","2A+2E","3A+0E","3A+1E"];

function buildSofaTable(){
  tbodySofa.innerHTML="";
  SOFA_ORDER.forEach(comp=>{
    const tr=document.createElement('tr');
    const tdComp=document.createElement('td'); tdComp.textContent=comp;
    const tdSel=document.createElement('td');
    const sel=document.createElement('select');
    SOFA_OPTIONS.forEach(opt=>{
      const o=document.createElement('option');
      o.value=opt.val; o.textContent=opt.label;
      if((RULES.sofa[comp]||"0")===opt.val) o.selected=true;
      sel.appendChild(o);
    });
    sel.dataset.comp=comp;
    tdSel.appendChild(sel);
    tr.appendChild(tdComp); tr.appendChild(tdSel);
    tbodySofa.appendChild(tr);
  });
}

function setKeywordFields(){
  txtBaby.value=(RULES.keywords.baby||DEFAULTS.keywords.baby).join(', ');
  txtComm.value=(RULES.keywords.comm||DEFAULTS.keywords.comm).join(', ');
  txtDay.value=(RULES.keywords.dayuse||DEFAULTS.keywords.dayuse).join(', ');
  txtEarly.value=(RULES.keywords.early||DEFAULTS.keywords.early).join(', ');
}

/* ===================== Save / Load ===================== */
function loadRules(){
  try{
    const raw=localStorage.getItem(LS_KEY);
    if(!raw) return JSON.parse(JSON.stringify(DEFAULTS));
    const obj=JSON.parse(raw);
    return {
      keywords: { ...DEFAULTS.keywords, ...(obj.keywords||{}) },
      sofa:     { ...DEFAULTS.sofa,     ...(obj.sofa||{}) }
    };
  }catch(e){
    return JSON.parse(JSON.stringify(DEFAULTS));
  }
}

function saveRules(){
  const kw = {
    baby: parseList(txtBaby.value),
    comm: parseList(txtComm.value),
    dayuse: parseList(txtDay.value),
    early: parseList(txtEarly.value)
  };
  const sofa={};
  tbodySofa.querySelectorAll('select').forEach(sel=>{
    sofa[sel.dataset.comp]=sel.value;
  });
  RULES = { keywords: kw, sofa };
  localStorage.setItem(LS_KEY, JSON.stringify(RULES));
  statusEl.textContent='RÃ¨gles sauvegardÃ©es âœ“';
  setTimeout(()=>statusEl.textContent='RÃ¨gles chargÃ©es',1200);
  compileRegex();
  if(lastRows) processRows(lastRows);
}

function resetRules(){
  RULES = JSON.parse(JSON.stringify(DEFAULTS));
  localStorage.setItem(LS_KEY, JSON.stringify(RULES));
  setKeywordFields();
  buildSofaTable();
  compileRegex();
  if(lastRows) processRows(lastRows);
}

function exportRules(){
  const data = JSON.stringify(RULES, null, 2);
  const blob = new Blob([data], {type:'application/json'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href=url; a.download='aar_soiree_rules.json'; a.click();
  URL.revokeObjectURL(url);
}

document.getElementById('btn-save').onclick=saveRules;
document.getElementById('btn-reset').onclick=resetRules;
document.getElementById('btn-export').onclick=exportRules;
document.getElementById('import-file').onchange=(e)=>{
  const file=e.target.files[0]; if(!file) return;
  const reader=new FileReader();
  reader.onload=ev=>{
    try{
      const obj=JSON.parse(ev.target.result);
      RULES = {
        keywords: { ...DEFAULTS.keywords, ...(obj.keywords||{}) },
        sofa:     { ...DEFAULTS.sofa,     ...(obj.sofa||{}) }
      };
      localStorage.setItem(LS_KEY, JSON.stringify(RULES));
      setKeywordFields();
      buildSofaTable();
      compileRegex();
      if(lastRows) processRows(lastRows);
    }catch(err){ alert('JSON invalide'); }
  };
  reader.readAsText(file,'utf-8');
};

/* ===================== Compile keyword regex ===================== */
let RX={baby:null, comm:null, dayuse:null, early:null};
function compileRegex(){
  RX.baby  = buildKeywordRegex(RULES.keywords.baby||[]);
  RX.comm  = buildKeywordRegex(RULES.keywords.comm||[]);
  RX.dayuse= buildKeywordRegex(RULES.keywords.dayuse||[]);
  RX.early = buildKeywordRegex(RULES.keywords.early||[]);
}
compileRegex();
setKeywordFields();
buildSofaTable();

/* ===================== Lecture & Analyse ===================== */
let lastRows=null;

function handleFile(file){
  const reader=new FileReader();
  reader.onload=(e)=>{
    const data=new Uint8Array(e.target.result);
    const wb=XLSX.read(data,{type:'array'});
    const sheet=wb.Sheets[wb.SheetNames[0]];
    const rows=XLSX.utils.sheet_to_json(sheet);
    lastRows=rows;
    processRows(rows);
  };
  reader.readAsArrayBuffer(file);
}

function processRows(rows){
  const days={};

  rows.forEach(r=>{
    const rawName=(r.Nom||r.Client||r.Name||"").toString().trim();
    if(!rawName) return;
    const nom=rawName.split(/\s+/)[0].toUpperCase();

    const a=parseInt(r.Adultes||r.Adults||r['Nb Adultes']||0)||0;
    const e=parseInt(r.Enfants||r.Children||r['Nb Enfants']||0)||0;

    const rawComment=(r.Commentaire||r.Comments||r.Notes||"");
    const comment=stripAccentsLower(rawComment);

    const rawDate=(r.Date||r.Arrivee||r["Date d'arrivÃ©e"]||r['Date dâ€™arrivÃ©e']||r['Arrival Date']||"Non datÃ©").toString();
    const {key:dateKey,label:dateLabel}=smartDateKey(rawDate.split(' ')[0]||'Non datÃ©');

    if(!days[dateKey]) days[dateKey]={label:dateLabel, sofa1:[],sofa2:[],baby:[],comm:[],dayuse:[],early:[]};

    const compKey=`${a}A+${e}E`;
    const action = RULES.sofa[compKey]; // "0" | "1" | "2" | undefined
    if(action==="2") days[dateKey].sofa2.push(nom);
    else if(action==="1") days[dateKey].sofa1.push(nom);

    if(RX.baby  && RX.baby.test(comment))   days[dateKey].baby.push(nom);
    if(RX.comm  && RX.comm.test(comment))   days[dateKey].comm.push(nom);
    if(RX.dayuse&& RX.dayuse.test(comment)) days[dateKey].dayuse.push(nom);
    if(RX.early && RX.early.test(comment))  days[dateKey].early.push(nom);
  });

  renderDays(days);
}

function renderDays(days){
  const out=document.getElementById('output');
  out.innerHTML='';
  const keys=Object.keys(days).sort();
  if(!keys.length){ out.innerHTML='<p class="muted">Aucune donnÃ©e dÃ©tectÃ©e.</p>'; return; }

  keys.forEach(k=>{
    const d=days[k];
    const block=document.createElement('div');
    block.className='day-block';
    const total = [d.sofa1,d.sofa2,d.baby,d.comm,d.dayuse,d.early].reduce((n,a)=>n+a.length,0);

    let html = `<div class="day-header">ğŸ“… ${d.label} <span class="muted small">â€” ${total} items</span></div>`;
    const add=(label,arr)=>{ if(arr.length) html+=`<div class="category">${label} : ${arr.sort().join(' - ')}</div>`; };
    add('ğŸ›‹ï¸ 2 SOFA', d.sofa2);
    add('ğŸ›‹ï¸ 1 SOFA', d.sofa1);
    add('ğŸ¼ LIT BEBE', d.baby);
    add('ğŸ”— COMMUNIQUANTE', d.comm);
    add('â° DAY USE', d.dayuse);
    add('â° ARRIVEE PRIORITAIRE', d.early);

    block.innerHTML=html;

    const btn=document.createElement('button');
    btn.className='copy-btn';
    btn.textContent='ğŸ“‹ Copier';
    btn.onclick=()=>navigator.clipboard.writeText(block.innerText);
    block.appendChild(btn);

    out.appendChild(block);
  });
}

/* ===================== Checklist ===================== */
const LS_CHECK='aar_checklist_v1';
const LS_MEMO='aar_memo_v1';
const checklistEl=document.getElementById('checklist');
const memoEl=document.getElementById('memo');
const resetCheck=document.getElementById('reset-check');

const checklistDefault=[
  "VÃ©rifier la propretÃ© du hall + journaux + musique",
  "Compter le fond de caisse",
  "ContrÃ´ler et prÃ©parer les arrivÃ©es du lendemain",
  "ContrÃ´ler les garanties Ã  23h",
  "ClÃ´turer la caisse journaliÃ¨re"
];
let checklist=JSON.parse(localStorage.getItem(LS_CHECK)||'null')||checklistDefault.map(t=>({text:t,done:false}));

function renderChecklist(){
  checklistEl.innerHTML='';
  checklist.forEach((it,i)=>{
    const div=document.createElement('div');
    const cb=document.createElement('input');cb.type='checkbox';cb.checked=it.done;
    cb.onchange=()=>{checklist[i].done=cb.checked;saveChecklist();};
    const span=document.createElement('span');span.textContent=it.text;
    div.appendChild(cb);div.appendChild(span);checklistEl.appendChild(div);
  });
}
function saveChecklist(){localStorage.setItem(LS_CHECK,JSON.stringify(checklist));}
resetCheck.onclick=()=>{checklist=checklistDefault.map(t=>({text:t,done:false}));saveChecklist();renderChecklist();}
memoEl.value=localStorage.getItem(LS_MEMO)||'';
memoEl.oninput=()=>localStorage.setItem(LS_MEMO,memoEl.value);
renderChecklist();

/* ===================== Emails ===================== */
const LS_MAILS='aar_mails_v1';
const emailsEl=document.getElementById('emails');
const addMail=document.getElementById('add-mail');
const resetMails=document.getElementById('reset-mails');

let mails=JSON.parse(localStorage.getItem(LS_MAILS)||'null')||[
  {name:"Maintenance",email:"",subject:"",body:"Bonjour,\n\n[Texte du message]\n\nCordialement,"}
];

function renderMails(){
  emailsEl.innerHTML='';
  mails.forEach((m,i)=>{
    const card=document.createElement('div');
    card.style.border='1px solid #ccc';card.style.borderRadius='8px';card.style.padding='10px';card.style.margin='10px 0';
    card.innerHTML=`
      <input type="text" placeholder="Nom" value="${m.name}" class="mail-name"/><br/>
      <input type="text" placeholder="Email" value="${m.email}" class="mail-email"/><br/>
      <input type="text" placeholder="Objet" value="${m.subject}" class="mail-subject"/><br/>
      <textarea class="mail-body" rows="5">${m.body}</textarea><br/>
      <button class="copy-mail">ğŸ“‹ Copier</button>
      <button class="del-mail">â– Supprimer</button>
    `;
    card.querySelector('.copy-mail').onclick=()=>{
      const txt=`To: ${m.email}\nSubject: ${m.subject}\n\n${m.body}`;
      navigator.clipboard.writeText(txt);
    };
    card.querySelector('.del-mail').onclick=()=>{
      mails.splice(i,1);saveMails();renderMails();
    };
    ['mail-name','mail-email','mail-subject','mail-body'].forEach(cls=>{
      card.querySelector('.'+cls).oninput=()=>{
        m.name=card.querySelector('.mail-name').value;
        m.email=card.querySelector('.mail-email').value;
        m.subject=card.querySelector('.mail-subject').value;
        m.body=card.querySelector('.mail-body').value;
        saveMails();
      };
    });
    emailsEl.appendChild(card);
  });
}
function saveMails(){localStorage.setItem(LS_MAILS,JSON.stringify(mails));}
addMail.onclick=()=>{mails.push({name:"",email:"",subject:"",body:""});saveMails();renderMails();}
resetMails.onclick=()=>{mails=[{name:"Maintenance",email:"",subject:"",body:"Bonjour,\n\n[Texte du message]\n\nCordialement,"}];saveMails();renderMails();}
renderMails();
</script>
</body>
</html>
