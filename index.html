<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>AAR SoirÃ©e â€” Live Rules</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <header>
    <h1>Musheep</h1>

    <div id="gh-status" class="gh-date">
      â˜ï¸ <span id="gh-date-text">â€“</span>
    </div>

    <nav>
      <a href="#" id="tab-home" class="active">ğŸ  Home</a>
      <a href="#" id="tab-groups">ğŸ‘¥ Groupes</a>
      <a href="#" id="tab-vcc">ğŸ’³ VCC</a>
      <a href="#" id="tab-rules">âš™ï¸ RÃ¨gles</a>
      <a href="#" id="tab-check">ğŸ“‹ Checklist</a>
      <a href="#" id="tab-mails">âœ‰ï¸ Emails</a>
    </nav>
  </header>

  <!-- ================= HOME ================= -->
  <div class="container" id="view-home">
    <div id="drop-zone" class="drop-zone">
      ğŸ“‚ Glisse ici tes fichiers :
      <strong>Arrivals indiv</strong> / <strong>ArrivalList GROUPE</strong>
      <div class="muted" style="margin-top:10px">
        Tu peux glisser plusieurs fichiers. Le systÃ¨me dÃ©tecte le format.
      </div>
    </div>

    <input type="file" id="file-input" accept=".csv,.txt" style="display:none" multiple />
    <div id="output"></div>
  </div>

  <!-- ================= GROUPES ================= -->
  <div class="container" id="view-groups" style="display:none">
    <h2>Groupes</h2>
    <div id="groups-output" class="muted">
      DonnÃ©es groupes chargÃ©es. Voir console pour lâ€™instant.
    </div>
  </div>

  <!-- ================= VCC ================= -->
  <div class="container" id="view-vcc" style="display:none">
    <h2>VCC â€” contrÃ´le Arrhes / PREPAY</h2>

    <div class="muted" style="margin:6px 0 12px 0">
      Import ton export Arrivals dans Home.
      Ici, on liste les lignes dont <strong>GUARANTY</strong>
      ne contient pas <strong>Arrhes</strong> ni <strong>PREPAY</strong>.
    </div>

    <div class="row" style="margin-top:12px">
      <button id="vcc-refresh" class="btn">ğŸ”„ Recalculer depuis Home</button>
      <button id="vcc-copy" class="btn primary">ğŸ“‹ Copier la liste</button>
      <div class="right small muted" id="vcc-status">â€“</div>
    </div>

    <div id="vcc-output" style="margin-top:14px"></div>
  </div>

  <!-- ================= CHECKLIST ================= -->
  <div class="container" id="view-check" style="display:none">
    <h2>Checklist shift du soir</h2>
    <div id="checklist"></div>
    <textarea
      id="memo"
      placeholder="MÃ©mo du soir (sauvegardÃ© automatiquement)">
    </textarea>
    <button id="reset-check" class="btn warn" style="margin-top:10px">
      ğŸ§¹ RÃ©initialiser checklist
    </button>
  </div>

  <!-- ================= EMAILS ================= -->
  <div class="container" id="view-mails" style="display:none">
    <h2>ModÃ¨les dâ€™emails</h2>
    <div id="emails"></div>
    <div class="btn-row">
      <button id="add-mail" class="btn">â• Ajouter un modÃ¨le</button>
      <button id="reset-mails" class="btn warn">ğŸ§¹ RÃ©initialiser</button>
    </div>
  </div>

  <!-- ================= RULES ================= -->
  <div class="container" id="view-rules" style="display:none">
    <div class="row">
      <h2 style="margin:0">RÃ¨gles</h2>
      <div class="right small muted" id="rules-status">
        RÃ¨gles chargÃ©es
      </div>
    </div>

    <div class="rule-card" style="margin:14px 0">
      <h3 style="margin:0 0 8px 0">
        RÃ¨gles dâ€™ouverture de sofa
      </h3>
      <table>
        <thead>
          <tr>
            <th>Composition</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="sofa-rules-body"></tbody>
      </table>
    </div>

    <div class="rules-grid">
      <div class="rule-card">
        <h4>ğŸ¼ LIT BÃ‰BÃ‰</h4>
        <textarea id="kw-baby"></textarea>
      </div>
      <div class="rule-card">
        <h4>ğŸ”— COMMUNIQUANTE</h4>
        <textarea id="kw-comm"></textarea>
      </div>
      <div class="rule-card">
        <h4>â° DAY USE</h4>
        <textarea id="kw-dayuse"></textarea>
      </div>
      <div class="rule-card">
        <h4>â° ARRIVÃ‰E PRIORITAIRE</h4>
        <textarea id="kw-early"></textarea>
      </div>
    </div>

    <div class="btn-row">
      <button class="btn good" id="btn-save">ğŸ’¾ Mettre Ã  jour</button>
      <button class="btn" id="btn-export">ğŸ“¤ Exporter</button>
      <label class="btn">
        ğŸ“¥ Importer
        <input type="file" id="import-file" accept="application/json" style="display:none" />
      </label>
      <button class="btn warn" id="btn-reset">
        â†º Valeurs par dÃ©faut
      </button>
    </div>
  </div>

  <!-- ================= SCRIPTS ================= -->
  <script src="script.js"></script>
  <script src="groups.module.js"></script>
</body>
</html>
