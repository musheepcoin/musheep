<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>AAR SoirÃ©e â€” Live Rules</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <header>
    <div class="logo-container">
      <img src="/musheep.gif" alt="Musheep" class="logo" />
      <div id="gh-status" class="gh-date">
        â˜ï¸ <span id="gh-date-text">â€“</span>
      </div>
    </div>

    <nav>
      <a href="#" id="tab-home" class="active">ğŸ  Home</a>
      <a href="#" id="tab-indiv">ğŸ‘¤ Individuel</a>
      <a href="#" id="tab-groups">ğŸ‘¥ Groupes</a>
      <a href="#" id="tab-vcc">ğŸ’³ VCC</a>
      <a href="#" id="tab-rules">âš™ï¸ RÃ¨gles</a>
      <a href="#" id="tab-check">ğŸ“‹ Checklist</a>
      <a href="#" id="tab-tarifs">ğŸ·ï¸ Tarifs</a>
      <a href="#" id="tab-inventory">ğŸ“¦ Inventaire</a>
      <a href="#" id="tab-mails">âœ‰ï¸ Emails</a>
    </nav>
  </header>

  <!-- ================= HOME ================= -->
  <div class="container" id="view-home">
    <div class="home-drop-grid">

      <div class="card">
        <h3>ğŸ“‚ ArrivÃ©es Individuelles</h3>
        <div id="drop-zone-indiv" class="drop-zone">
          Glisse ici le portefeuille de rÃ©servation des individuels
          <div class="muted">Fichier CSV uniquement</div>
        </div>
      </div>

      <div class="card">
        <h3>ğŸ‘¥ ArrivÃ©es Groupes</h3>
        <div id="drop-zone-groups" class="drop-zone">
          Glisse ici le portefeuille des rÃ©servations de groupe
          <div class="muted">Fichier CSV uniquement</div>
        </div>
      </div>

    </div>

    <!-- âœ… TODO (DOIT RESTER DANS view-home) -->
    <div class="row" style="margin-top:24px; align-items:stretch">

      <!-- TO DO AUJOURD'HUI -->
      <div class="card" style="flex:1">
        <div class="row" style="margin-bottom:10px">
          <h3 style="margin:0">ğŸŸ¢ To Do â€” Aujourdâ€™hui</h3>
          <!-- âœ… horodatage (rempli par todo.module.js) -->
          <div id="today-stamp" class="small muted right">â€“</div>
        </div>

        <div id="todo-today" class="todo-list"></div>
      </div>

      <!-- TO DO SEMAINE -->
      <div class="card" style="flex:1">
        <h3>ğŸ—“ï¸ To Do â€” Semaine</h3>
        <div id="todo-week" class="todo-list"></div>
      </div>

    </div>
  </div>

  <!-- ================= INDIVIDUEL ================= -->
  <div class="container" id="view-indiv" style="display:none">
    <h2>ArrivÃ©es individuelles</h2>
    <div id="output-indiv"></div>
  </div>

  <!-- ================= GROUPES ================= -->
  <div class="container" id="view-groups" style="display:none">
    <h2>Groupes</h2>
    <div id="groups-output" class="muted">
      DonnÃ©es groupes chargÃ©es. Voir console pour lâ€™instant.
    </div>
  </div>

  <!-- ================= VCC ================= -->
  <div class="container" id="view-vcc" style="display:none">
    <h2>VCC â€” contrÃ´le Arrhes / PREPAY</h2>

    <div class="muted" style="margin:6px 0 12px 0">
      Import ton export Arrivals dans Home.
      Ici, on liste les lignes dont <strong>GUARANTY</strong>
      ne contient pas <strong>Arrhes</strong> ni <strong>PREPAY</strong>.
      Les <strong>RATES ciblÃ©s</strong> se rÃ¨glent dans lâ€™onglet <strong>RÃ¨gles</strong>.
    </div>

    <div class="row" style="margin-top:12px">
      <button id="vcc-refresh" class="btn" type="button">ğŸ”„ Recalculer depuis Home</button>
      <button id="vcc-copy" class="btn primary" type="button">ğŸ“‹ Copier la liste</button>
      <div class="right small muted" id="vcc-status">â€“</div>
    </div>

    <div id="vcc-output" style="margin-top:14px"></div>
  </div>

  <!-- ================= CHECKLIST ================= -->
  <div class="container" id="view-check" style="display:none">
    <h2>Checklist</h2>
    <div id="checklist"></div>
    <textarea id="memo" placeholder="MÃ©mo du soir (sauvegardÃ© automatiquement)"></textarea>
    <button id="reset-check" class="btn warn" style="margin-top:10px" type="button">
      ğŸ§¹ RÃ©initialiser checklist
    </button>
  </div>
  <!-- ================= TARIFS ================= -->
  <div class="container" id="view-tarifs" style="display:none">
    <div class="row">
      <h2 style="margin:0">Tarifs du jour</h2>
      <div class="right small muted" id="tarifs-status">â€“</div>
    </div>

    <div class="muted" style="margin:6px 0 12px 0">
      Remplis uniquement <strong>Prix du jour</strong>.
      <strong>ALL</strong> = -5% ; <strong>ALL Plus</strong> = -15% (sur le prix du jour).
    </div>

    <div class="card" style="padding:14px">
      <table id="tarifs-table">
        <thead>
          <tr>
            <th>Gamme</th>
            <th>Prix du jour</th>
            <th>ALL (-5%)</th>
            <th>ALL Plus (-15%)</th>
          </tr>
        </thead>
        <tbody id="tarifs-body"></tbody>
      </table>

      <div class="btn-row">
        <button id="tarifs-reset" class="btn warn" type="button">â†º Reset</button>
      </div>
    </div>
  </div>

  <!-- ================= INVENTAIRE ================= -->
  <div class="container" id="view-inventory" style="display:none">
    <h2>Inventaire desk</h2>
    <div class="muted" style="margin:6px 0 12px 0">
      Coche/dÃ©coche. Sauvegarde auto (local + GitHub).
    </div>

    <div id="inventorylist"></div>

    <button id="reset-inventory" class="btn warn" style="margin-top:10px" type="button">
      ğŸ§¹ Reset inventaire
    </button>
  </div>

  <!-- ================= EMAILS ================= -->
  <div class="container" id="view-mails" style="display:none">
    <h2>ModÃ¨les dâ€™emails</h2>
    <div id="emails"></div>
    <div class="btn-row">
      <button id="add-mail" class="btn" type="button">â• Ajouter un modÃ¨le</button>
      <button id="reset-mails" class="btn warn" type="button">ğŸ§¹ RÃ©initialiser</button>
    </div>
  </div>

  <!-- ================= RULES ================= -->
  <div class="container" id="view-rules" style="display:none">
    <div class="row">
      <h2 style="margin:0">RÃ¨gles</h2>
      <div class="right small muted" id="rules-status">RÃ¨gles chargÃ©es</div>
    </div>

    <div class="rule-card" style="margin:14px 0">
      <h3 style="margin:0 0 8px 0">RÃ¨gles dâ€™ouverture de sofa</h3>
      <table>
        <thead>
          <tr>
            <th>Composition</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="sofa-rules-body"></tbody>
      </table>
    </div>

    <div class="rules-grid">
      <div class="rule-card">
        <h4>ğŸ¼ LIT BÃ‰BÃ‰</h4>
        <textarea id="kw-baby"></textarea>
      </div>

      <div class="rule-card">
        <h4>ğŸ”— COMMUNIQUANTE</h4>
        <textarea id="kw-comm"></textarea>
      </div>

      <div class="rule-card">
        <h4>â° DAY USE</h4>
        <textarea id="kw-dayuse"></textarea>
      </div>

      <div class="rule-card">
        <h4>â° ARRIVÃ‰E PRIORITAIRE</h4>
        <textarea id="kw-early"></textarea>
      </div>

      <div class="rule-card">
        <h4>ğŸ’³ VCC â€” RATES ciblÃ©s</h4>
        <textarea id="kw-vcc-rates" placeholder="Ex: FLMRB4, FMRA4S, FMRB4S, FLRB4 ..."></textarea>
        <div class="muted" style="margin-top:6px">
          SÃ©pare par virgules. La casse (MAJ/min) nâ€™a pas dâ€™importance.
        </div>
      </div>
    </div>

    <div class="btn-row">
      <button class="btn good" id="btn-save" type="button">ğŸ’¾ Mettre Ã  jour</button>
      <button class="btn" id="btn-export" type="button">ğŸ“¤ Exporter</button>
      <label class="btn">
        ğŸ“¥ Importer
        <input type="file" id="import-file" accept="application/json" style="display:none" />
      </label>
      <button class="btn warn" id="btn-reset" type="button">â†º Valeurs par dÃ©faut</button>
    </div>
  </div>

  <!-- ================= SCRIPTS ================= -->
  <script src="script.js"></script>
  <script src="inventory.module.js"></script>
  <script src="todo.module.js"></script>
  <script src="groups.module.js"></script>

</body>
</html>
