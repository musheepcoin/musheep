<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>AAR SoirÃ©e â€” Live Rules</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <script src="https://cdn.plot.ly/plotly-2.30.0.min.js"></script>
  <link rel="stylesheet" href="styles.css" />
</head>

<body>

<header>
  <div class="logo-container">
    <img src="/musheep.gif" alt="Musheep" class="logo" />
    <div id="gh-status" class="gh-date">
      â˜ï¸ <span id="gh-date-text">â€“</span>
    </div>
  </div>

  <nav>
    <a href="#" id="tab-home" class="active">ğŸ  Home</a>
	<a href="#" id="tab-overview">ğŸ“Œ Overview</a>
    <a href="#" id="tab-indiv">ğŸ‘¤ Individuel</a>
    <a href="#" id="tab-groups">ğŸ‘¥ Groupes</a>
    <a href="#" id="tab-vcc">ğŸ’³ VCC</a>
    <a href="#" id="tab-rules">âš™ï¸ RÃ¨gles</a>
    <a href="#" id="tab-check">ğŸ“‹ Checklist</a>
    <a href="#" id="tab-tarifs">ğŸ·ï¸ Tarifs</a>
    <a href="#" id="tab-inventory">ğŸ“¦ Inventaire</a>
    <a href="#" id="tab-mails">âœ‰ï¸ Emails</a>
  </nav>
  <button id="theme-toggle" class="btn btn-theme" type="button" title="Mode Day/Night">
  ğŸŒ™ Night
</button>
</header>

<!-- ================= HOME ================= -->
<div class="container" id="view-home">

  <div class="home-drop-grid">

    <div class="card">
      <h3>ğŸ“‚ Portefeuille de rÃ©servation (source unique)</h3>
      <div id="drop-zone-indiv" class="drop-zone">
        Glisse ici le portefeuille de rÃ©servation (Indiv + Groupes)
        <div class="muted">Fichier CSV uniquement</div>
      </div>
    </div>

  </div>

  <div class="card" style="margin-top:24px">
    <h3>ğŸ“ˆ ArrivÃ©es â€” Graph</h3>
    <div class="muted small" style="margin-bottom:8px">
      AlimentÃ© automatiquement par lâ€™import du portefeuille.
    </div>
    <div id="home-arrivals-chart" class="home-chart"></div>
  </div>

  <div class="row" style="margin-top:24px; align-items:stretch">
    <div class="card" style="flex:1">
      <div class="row" style="margin-bottom:10px">
        <h3 style="margin:0">ğŸŸ¢ To Do â€” Aujourdâ€™hui</h3>
        <div id="today-stamp" class="small muted right">â€“</div>
      </div>
      <div id="todo-today" class="todo-list"></div>
    </div>

    <div class="card" style="flex:1">
      <h3>ğŸ—“ï¸ To Do â€” Semaine</h3>
      <div id="todo-week" class="todo-list"></div>
    </div>
  </div>

</div>

<!-- ================= OVERVIEW ================= -->
<div class="container" id="view-overview" style="display:none">
  <h2>Overview â€” Ascenseur / Baignoire</h2>

  <div class="card" style="padding:14px; margin-top:14px">
    <div class="muted">
      âœ… AlimentÃ© automatiquement par le mÃªme import que Home (portefeuille de rÃ©servation).
      <br/>Si rien ne sâ€™affiche : retourne sur <b>Home</b> et drop le CSV.
    </div>
  </div>

  <div id="overview-results" style="margin-top:14px"></div>
</div>

<!-- ================= INDIV ================= -->
<div class="container" id="view-indiv" style="display:none">
  <h2>ArrivÃ©es individuelles</h2>
  <div id="output-indiv"></div>
</div>

<!-- ================= GROUPES ================= -->
<div class="container" id="view-groups" style="display:none">
  <h2>Groupes</h2>
  <div id="groups-output"></div>
</div>

<!-- ================= VCC ================= -->
<div class="container" id="view-vcc" style="display:none">
  <h2>VCC â€” contrÃ´le Arrhes / PREPAY</h2>
  <div id="vcc-output" style="margin-top:14px"></div>
</div>

<!-- ================= CHECKLIST ================= -->
<div class="container" id="view-check" style="display:none">
  <h2>Checklist</h2>
  <div id="checklist"></div>
  <textarea id="memo" placeholder="Notes internes..."></textarea>
</div>

<!-- ================= TARIFS ================= -->
<div class="container" id="view-tarifs" style="display:none">
  <h2>Tarifs du jour</h2>
  <table>
    <thead>
      <tr>
        <th>CatÃ©gorie</th>
        <th>Prix du jour</th>
        <th>ALL (-5%)</th>
        <th>ALL Plus (-15%)</th>
      </tr>
    </thead>
    <tbody id="tarifs-body"></tbody>
  </table>
  <div class="btn-row">
    <button class="btn warn" id="tarifs-reset">â†º Reset</button>
    <div id="tarifs-status" class="muted small">Tarifs chargÃ©s</div>
  </div>
</div>

<!-- ================= INVENTAIRE ================= -->
<div class="container" id="view-inventory" style="display:none">
  <h2>Inventaire desk</h2>
  <div id="inventorylist"></div>
  <div class="btn-row">
    <button class="btn warn" id="reset-inventory">â†º Reset inventaire</button>
  </div>
</div>

<!-- ================= EMAILS ================= -->
<div class="container" id="view-mails" style="display:none">
  <h2>ModÃ¨les dâ€™emails</h2>
  <div id="emails"></div>
  <div class="btn-row">
    <button class="btn primary" id="add-mail">â• Ajouter</button>
    <button class="btn warn" id="reset-mails">â†º Reset</button>
  </div>
</div>

<!-- ================= RÃˆGLES (RESTORÃ‰ COMPLET) ================= -->
<div class="container" id="view-rules" style="display:none">

  <div class="row">
    <h2 style="margin:0">RÃ¨gles</h2>
    <div class="right small muted" id="rules-status">RÃ¨gles chargÃ©es</div>
  </div>

  <div class="card" style="margin:20px 0">
    <h3>RÃ¨gles dâ€™ouverture de sofa</h3>
    <table>
      <thead>
        <tr>
          <th>Composition</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody id="sofa-rules-body"></tbody>
    </table>
  </div>

  <div class="row" style="gap:20px; flex-wrap:wrap">

    <div class="card" style="flex:1; min-width:260px; padding:14px">
      <h4>ğŸ¼ LIT BÃ‰BÃ‰</h4>
      <textarea id="kw-baby"></textarea>
    </div>

    <div class="card" style="flex:1; min-width:260px; padding:14px">
      <h4>ğŸ”— COMMUNIQUANTE</h4>
      <textarea id="kw-comm"></textarea>
    </div>

    <div class="card" style="flex:1; min-width:260px; padding:14px">
      <h4>â° DAY USE</h4>
      <textarea id="kw-dayuse"></textarea>
    </div>

    <div class="card" style="flex:1; min-width:260px; padding:14px">
      <h4>â° ARRIVÃ‰E PRIORITAIRE</h4>
      <textarea id="kw-early"></textarea>
    </div>

    <div class="card" style="flex:1; min-width:260px; padding:14px">
      <h4>ğŸ’³ VCC â€” RATES ciblÃ©s</h4>
      <textarea id="kw-vcc-rates"></textarea>
      <div class="muted small">SÃ©parer par virgules</div>
    </div>

  </div>

  <div class="btn-row" style="margin-top:20px">
    <button class="btn good" id="btn-save">ğŸ’¾ Mettre Ã  jour</button>
    <button class="btn" id="btn-export">ğŸ“¤ Exporter</button>
    <label class="btn">
      ğŸ“¥ Importer
      <input type="file" id="import-file" accept="application/json" style="display:none" />
    </label>
    <button class="btn warn" id="btn-reset">â†º Valeurs par dÃ©faut</button>
  </div>

</div>

<!-- SCRIPTS -->
<script src="script.js"></script>
<script src="overview.module.js"></script>
<script src="inventory.module.js"></script>
<script src="todo.module.js"></script>
<script src="groups.module.js"></script>

</body>
</html>
